@page "/"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]
@inject IAuthService AuthService
@inject NavigationManager NavigationManager
@inject ITranslationService TranslationService

<PageTitle>@TranslationService.GetTranslation("home.title", "EventForge - Home")</PageTitle>

<!-- Vertical stack layout with full-width cards (MudItem xs=12) as per issue #92 -->
<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-4">
    <MudGrid Spacing="4">
        <!-- Dashboard Card - Shown for authenticated users -->
        <MudItem xs="12">
            <MudPaper Class="ef-tile" role="main">
                <MudCardContent>
                    <header class="text-center mb-4">
                        <MudText Typo="Typo.h4" 
                                 Component="h1" 
                                 Align="Align.Center" 
                                 Class="mb-4">
                            <MudIcon Icon="@Icons.Material.Filled.Dashboard" 
                                     Class="mr-2" 
                                     Size="Size.Medium"
                                     aria-hidden="true" />
                            @TranslationService.GetTranslation("home.welcomeBack", "Welcome Back")
                        </MudText>
                        <MudText Typo="Typo.body1" 
                                 Align="Align.Center" 
                                 Color="Color.Secondary">
                            @TranslationService.GetTranslation("home.dashboardSubtitle", "Your EventForge Dashboard")
                        </MudText>
                    </header>

                    <!-- Quick action buttons for authenticated users -->
                    <div class="d-flex justify-center flex-wrap ga-2">
                        <MudButton Variant="Variant.Outlined"
                                   Color="Color.Primary"
                                   StartIcon="@Icons.Material.Filled.Person"
                                   OnClick="@(() => NavigationManager.NavigateTo("/profile"))">
                            @TranslationService.GetTranslation("navigation.profile", "Profile")
                        </MudButton>
                        @if (_isSuperAdmin)
                        {
                            <MudButton Variant="Variant.Outlined"
                                       Color="Color.Secondary"
                                       StartIcon="@Icons.Material.Filled.AdminPanelSettings"
                                       OnClick="@(() => NavigationManager.NavigateTo("/admin"))">
                                @TranslationService.GetTranslation("navigation.admin", "Admin")
                            </MudButton>
                        }
                    </div>
                </MudCardContent>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private bool _isSuperAdmin = false;

    protected override async Task OnInitializedAsync()
    {
        // Check for SuperAdmin role since user is already authenticated
        _isSuperAdmin = await AuthService.IsSuperAdminAsync();
    }
}