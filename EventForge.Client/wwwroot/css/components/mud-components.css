/*
 EventForge - MudBlazor components stylesheet (aggiornato)
 Path: wwwroot/css/components/mud-components.css

 Scopo:
 - Centralizzare classi riutilizzabili per i componenti MudBlazor usati nel client
 - Fornire helper classes per allineare al design system: altezze uniformi, spacing, toolbar/action groups, drawer/dialogs
 - Supportare modalità dark, high-contrast e prefers-reduced-motion
 - Migliorare accessibilità, focus management e touch target

 Nota: riferimenti a Syncfusion rimossi/assenti.
*/

:root {
    --ef-input-height: 20px; /* target height for main form fields */
    --ef-button-height: 40px; /* primary and toolbar buttons */
    --ef-icon-size-small: 20px;
    --ef-icon-size-medium: 24px;
    --ef-gap: 16px; /* gap-2 baseline */
    --ef-gap-lg: 24px; /* gap-3 */
    --ef-field-height: 40px; /* unified field height for consistency */
    /* Focus / accessibility */
    --ef-focus-ring: 3px;
    --ef-focus-color: rgba(36,123,255,0.28);
    /* Touch */
    --ef-touch-min: 44px; /* WCAG recommended minimum touch target */
}

/* -------------------------
Height Normalization (MudBlazor inputs, selects, buttons)
------------------------- */

/* Inputs and Selects - height normalization using ef-* helper classes */
.ef-input .mud-input-root,
.ef-select .mud-input-root,
.ef-numeric .mud-input-root,
.ef-datepicker .mud-input-root,
.ef-timepicker .mud-input-root,
.ef-autocomplete .mud-input-root {
    box-sizing: border-box !important;
    font-size: 0.85rem !important;
    text-anchor: start !important;
}

/* Ensure internal elements flex to fit without adding extra height */
.ef-input .mud-input-slot,
.ef-select .mud-input-slot,
.ef-numeric .mud-input-slot,
.ef-datepicker .mud-input-slot,
.ef-timepicker .mud-input-slot,
.ef-autocomplete .mud-input-slot {
    min-height: unset !important;
    height: 80%;
    font-size: 0.85rem !important;
}

/* Select input internal styling */
.ef-select .mud-select-input {
    height: 80%;
    padding: 0px 0px 16px 0px;
    display: flex;
    align-items: center;
    box-sizing: border-box !important;
}

.ef-datepicker .mud-input-root-outlined {
    padding-bottom: 0px !important;
}

.ef-input .mud-input-input-root .mud-input-root-outlined {
    height: 80%;
    padding: 16px 0;
    display: flex;
    align-items: center;
    box-sizing: border-box !important;
    font-size: 0.85rem !important;
}

/* Numeric field input internal styling */
.ef-numeric .mud-input-input-control {
    height: 80%;
    padding: 16px 0;
    display: flex;
    align-items: center;
    box-sizing: border-box !important;
}

/* DatePicker and TimePicker input internal styling */
.ef-datepicker .mud-input-input-control,
.ef-timepicker .mud-input-input-control {
    height: 80%;
    padding: 0px 0px 16px 0px;
    display: flex;
    align-items: center;
    box-sizing: border-box !important;
}

/* Autocomplete input internal styling */
.ef-autocomplete .mud-input-control {
    height: 80%;
    padding: 6px 0;
    display: flex;
    align-items: center;
    box-sizing: border-box !important;
}

/* Fix alignment for adornments/icons inside all input types */
.ef-input .mud-input-adornment,
.ef-select .mud-input-adornment,
.ef-numeric .mud-input-adornment,
.ef-datepicker .mud-input-adornment,
.ef-timepicker .mud-input-adornment,
.ef-autocomplete .mud-input-adornment {
    height: 80%;
    display: inline-flex;
    align-items: center;
}

/* Textarea */
.ef-textarea .mud-input-root {
    min-height: var(--ef-input-height);
    box-sizing: border-box;
}

/* Buttons - standardize height excluding icon-only buttons */
.mud-button-root:not(.mud-icon-button) {
    min-height: var(--ef-button-height) !important;
    height: var(--ef-button-height) !important;
    padding: 0 12px !important;
    box-sizing: border-box;
}

/* Icon buttons: ensure a comfortable circular hit area (touch devices) */
.mud-icon-button,
.ef-icon-btn,
.mud-icon-button .mud-icon {
    min-width: var(--ef-button-height);
    min-height: var(--ef-button-height);
    width: var(--ef-button-height);
    height: var(--ef-button-height);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px; /* softer radius */
}

    /* Ensure icon sizes are consistent */
    .mud-icon-button .mud-icon,
    .ef-icon-md {
        font-size: var(--ef-icon-size-medium) !important;
    }

.ef-icon-sm {
    font-size: var(--ef-icon-size-small) !important;
}

/* -------------------------
 Generic spacing helpers
 ------------------------- */
.ef-pa-standard {
    padding: 16px;
}

.ef-pa-compact {
    padding: 8px;
}

.ef-mb-4 {
    margin-bottom: 16px;
}

.ef-gap {
    gap: var(--ef-gap);
}

.ef-gap-lg {
    gap: var(--ef-gap-lg);
}

/* -------------------------
 Buttons
 ------------------------- */
.ef-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: var(--ef-button-height);
    height: var(--ef-button-height);
    padding: 0 12px;
    transition: background-color 120ms ease, transform 80ms ease;
}

/* Small variant for table rows / compact toolbars */
.ef-btn-small {
    min-height: 36px;
    height: 36px;
    padding: 0 8px;
}

/* Visual states for better affordance */
.ef-btn:hover:not(:disabled) {
    transform: translateY(-1px);
}

/* Disabled state consistent */
button:disabled,
.mud-button-root[disabled],
.mud-icon-button[disabled] {
    opacity: 0.6;
    cursor: default;
    pointer-events: none;
}

/* -------------------------
 Inputs / Selects / Textareas helpers (already above)
 ------------------------- */

/* Helper for helper text styling (consistent across drawers and forms) */
.ef-helper-text {
    font-size: 0.75rem;
    margin-top: 4px;
    color: var(--mud-palette-text-secondary);
}

/* -------------------------
 Cards and containers
 ------------------------- */
.ef-card {
    padding: 16px;
    border-radius: 8px;
}

.ef-card-compact {
    padding: 12px;
}

.ef-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

/* Standardized card spacing for full-width sections */
.ef-section {
    margin-bottom: 16px;
}

/* -------------------------
 Tables
 ------------------------- */
.ef-table .mud-table-container {
    width: 100%;
}

.ef-table .mud-table thead th {
    font-weight: 600;
}

.ef-table .ef-truncate {
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Table toolbar and pager alignment */
.ef-table-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

/* -------------------------
 Drawer / Dialog
 ------------------------- */
.ef-drawer {
    display: flex;
    flex-direction: column;
}

    .ef-drawer .ef-drawer-header {
        padding: 12px;
        border-bottom: 1px solid var(--mud-palette-lines-default);
    }

    .ef-drawer .ef-drawer-content {
        padding: 12px;
        overflow-y: auto;
    }

    .ef-drawer .ef-drawer-actions {
        padding: 12px;
        border-top: 1px solid var(--mud-palette-lines-default);
        display: flex;
        justify-content: flex-end;
        gap: 12px;
    }

/* Dialog actions consistent sizing */
.ef-dialog-action .mud-button {
    min-height: var(--ef-button-height);
    height: var(--ef-button-height);
}

/* -------------------------
 Action button groups / toolbars
 ------------------------- */
.ef-action-group {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

    .ef-action-group.toolbar {
        gap: 12px;
    }

    .ef-action-group .mud-icon-button {
        padding: 6px;
    }

    /* Ensure toolbar mode uses medium-size buttons by default */
    .ef-action-group.toolbar .ef-btn,
    .ef-action-group.toolbar .mud-icon-button {
        min-height: var(--ef-button-height);
        height: var(--ef-button-height);
    }

/* -------------------------
 Chips / Badges / Avatars
 ------------------------- */
.ef-chip-small .mud-chip {
    height: 28px;
    min-height: 28px;
}

.ef-chip-medium .mud-chip {
    height: 36px;
    min-height: 36px;
}

.ef-badge {
    line-height: 1;
}

.ef-avatar-sm {
    width: 32px;
    height: 32px;
    font-size: 0.9rem;
}

.ef-avatar-md {
    width: 40px;
    height: 40px;
    font-size: 1rem;
}

.ef-avatar-lg {
    width: 56px;
    height: 56px;
    font-size: 1.25rem;
}

/* -------------------------
 Tooltip / Help
 ------------------------- */
.ef-help-tooltip .mud-tooltip {
    max-width: 300px;
}

    .ef-help-tooltip .mud-tooltip .mud-text {
        line-height: 1.3;
    }

/* -------------------------
 Responsive & Accessibility
 ------------------------- */
@media (max-width:768px) {
    :root {
        --ef-input-height: 36px;
        --ef-button-height: 36px;
        --ef-field-height: 36px;
    }

    .ef-drawer {
        width: 100vw !important;
    }

    /* Ensure icon buttons not too small for touch */
    .mud-icon-button,
    .ef-icon-btn {
        min-width: var(--ef-touch-min);
        min-height: var(--ef-touch-min);
    }
}

/* Reduce motion preference */
@media (prefers-reduced-motion: reduce) {
    * {
        transition: none !important;
        animation: none !important;
    }
}

/* High contrast mode */
@media (prefers-contrast: high) {
    .ef-drawer .ef-drawer-header,
    .ef-drawer .ef-drawer-actions {
        border-color: var(--mud-palette-text-primary);
    }
}

/* -------------------------
 Focus styles & accessibility helpers
 ------------------------- */
:focus {
    outline: none;
}

:focus-visible,
.mud-button-root:focus-visible,
.mud-icon-button:focus-visible,
.mud-input-root:focus-within {
    box-shadow: 0 0 0 var(--ef-focus-ring) var(--ef-focus-color);
    border-radius: 6px;
}

/* Visually hidden helper for accessibility */
.sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}

/* -------------------------
 Dark theme adjustments (MudBlazor) - complements Mud theme variables
------------------------- */
.mud-theme-dark .ef-card,
.mud-theme-dark .ef-card-compact {
    background-color: var(--mud-palette-surface);
    color: var(--mud-palette-text-primary);
}

.mud-theme-dark .ef-helper-text {
    color: var(--mud-palette-text-secondary);
}

/* Subtle elevation */
.ef-elevated {
    box-shadow: 0 4px 12px rgba(16,24,40,0.06);
}

/* -------------------------
 Utilities
 ------------------------- */
.ef-full-width {
    width: 100%;
}

.ef-compact-row {
    display: flex;
    gap: 12px;
    align-items: center;
}

.ef-form-row {
    display: flex;
    gap: 16px;
    align-items: center;
    flex-wrap: wrap;
}

/* Ensure media & icons are responsive */
.ef-media {
    max-width: 100%;
    height: auto;
}

/* End of EventForge MudBlazor component styles */
